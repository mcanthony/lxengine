<!DOCTYPE html>
<html>
    <head>
      <title>Raytracer</title>
      <link type="text/css" href="../shared/style/default.less" rel="stylesheet/less" />
      <link type="text/css" href="style.less" rel="stylesheet/less" />
      
      <script type="text/javascript" src="../shared/script/extern/less-1.1.3.min.js"></script>
      <script type="text/javascript" src="../shared/script/extern/jquery-1.6.4.min.js"></script>

      <script type="text/javascript" src="../shared/script/lx.keycodes.js"></script>
      <script type="text/javascript" src="../shared/script/lx.core-0.1.1.js"></script>
      <script type="text/javascript" src="../shared/script/lx.engine.js"></script>

      <script type="text/javascript" src="lx.vec.js"></script>
      <script type="text/javascript" src="raytracer.js"></script>

    </head>
    <body>
       <div id="body-wrap1">
        <h1>Ray Tracer</h1>

        <h2>About</h2>
        <p>
            The ray tracer is currently a work-in-progress for testing and demonstrating LxWeb, a javascript engine for visualization 
            and simulation.
        </p>

        <h2>Canvas</h2>

        <div class="layout-row">
            <div>
                <canvas id="canvas" width="256" height="512" style="border: 1px solid #555; box-shadow: 3px 3px 6px #888; margin-right: 64px;"></canvas>
                <div>
                    <span id="renderTime"></span>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <a id="download">download</a>
                </div>
            </div>
            <div>
                <p class="warning">
                    These options are <strong>in development</strong> and are only partly functional.
                </p>
                <form>
                    <fieldset style="border-radius: 4px">
                        <legend>Options</legend>
                        <table>
                            <tr>
                                <td>Presets</td>
                                <td>
                                    <select>
                                        <option>Quick</option>
                                        <option selected>Draft</option>
                                        <option>High-Quality</option>
                                        <option>Ultra</option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td>Scene</td>
                                <td>
                                    <select id="ui-sceneUrl">
                                        <option selected>scene_00.xml</option>
                                        <option>scene_01.xml</option>
                                    </select>
                                </td>
                            </tr>

                            <tr>
                                <td>Sample Count</td>
                                <td>
                                    <select id="ui-sampleCount" data-type="float">
                                        <option>1</option>
                                        <option>2</option>
                                        <option>4</option>
                                        <option>8</option>
                                        <option>16</option>
                                        <option>32</option>
                                    </select>
                                </td>
                            </tr>
                        </table>
                    </fieldset>
                    <div>
                        <a href="#" id="rerender">Render</a>
                    </div>
                </form>
            </div>
        </div>

        <h2>Todo</h2>
        <ul>
          <li>Samples</li>
          <li>Tiles</li>
        </ul>


        <script type="text/javascript">
        <!--
            var options =
            {
              sampleCount : 2,
              sceneUrl : "scene_00.xml",
            };


            $(document).ready(function () {

                for (var key in options)
                {
                  $("#ui-" + key).val(options[key]);
                  $("#ui-" + key).change((function (key) { return function() {
                    var value = $(this).val();

                    if ($(this).attr("data-type") == "float")
                      value = parseFloat(value);

                    options[key] = value;
                  };})(key) );
                }


                $("#rerender").click(function () {
                    engine.changeState(new raytracer.RenderLoop(options));
                    return false;
                });

                engine.gametick = 0;
                engine.run(new raytracer.RenderLoop(options));

            });
        -->
        </script>

        <!-- Google Analytics -->         <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-604613-10']);
            _gaq.push(['_trackPageview']);
            (function () {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();        </script> 

    </body>
</html>
