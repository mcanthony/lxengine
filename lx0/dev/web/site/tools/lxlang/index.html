<!DOCTYPE html>
<html>
    <head>
      <title>LxLang</title>
      <link type="text/css" href="../shared/style/default.less" rel="stylesheet/less" />
      <link type="text/css" href="style.less" rel="stylesheet/less" />
      
      <script type="text/javascript" src="../shared/script/extern/less-1.1.3.min.js"></script>
      <script type="text/javascript" src="../shared/script/extern/jquery-1.6.4.min.js"></script>
      <script type="text/javascript" src="lxlang.js"></script>

    </head>
    <body>
       <div id="body-wrap1">
        <h1>LxLang</h1>

        <h2>About</h2>

        <p>
          LxLang is an experimental language designed to support the rapid development of
          low-level "building block" function libraries that can be compiled to Javascript,
          C++, and GLSL.  It supports named functions, POD data types, function and operator
          overloading.  It also supports a limited set of special variables and shorthand
          constructs useful in the low-level function domain.
        </p>
        <p>
          The language is <i>not</i> designed to be fully general purpose: it does not, nor
          are there any plans to, support complex data types or general object-oriented
          programming concepts such as inheritance.  The output libraries of LxLang provide
          useful building block functionality upon which to build higher-level, language-specific
          constructs.
        </p>
        <p>
          The goal of LxLang is to aid in designing short and efficient functions and simple 
          primitive data types.
        </p>
        <p>
          <strong><em>Currently in development</em></strong>
        </p>

        <h2>Demonstration</h2>


        <p>
          The below translations are generated dynamically by a recursive descent parser implemented in Javascript.
        </p>
        <div style="text-align: center">
          <a href="#source">Source</a> &nbsp;&nbsp;&nbsp;
          <a href="#javascript">Javascript</a> &nbsp;&nbsp;&nbsp;
          <a href="#cpp">C++</a> &nbsp;&nbsp;&nbsp;
          <a href="#glsl">GLSL</a> &nbsp;&nbsp;&nbsp;
          <a href="#ast">AST</a>
        </div>

        <script id="source" type="text/lxlang">
module lx.glgeom;

function checker (vec2 uv) -> float
{
    vec2 t = abs( fract(uv) );
    ivec2 s = floor(t * 2);
    return floor(s[0] + s[1]) % 2;
}

function length (vec3 u) -> float
{
  return sqrt( dot(u, u) );
}

function lengthSqrd (vec3 u) -> float
{
  return dot(u, u);
}
      
function mul (vec3 u, float s) -> vec3
{
  return vec3( u[0] * s, u[1] * s, u[2] * s );
}      
        
function div (vec3 u, float s) -> vec3
{
  return vec3( u[0] / s, u[1] / s, u[2] / s );
}

function dot (vec3 u, vec3 v) -> vec3
{
  return u[0] * v[0] + u[1] * v[1] + u[2] * v[2];
}

function cross(vec3 u, vec3 v) -> vec3
{
  return vec3(
        u[1] * v[2] - v[1] * u[2],
        u[2] * v[0] - v[2] * u[0],
        u[0] * v[1] - v[0] * u[1],
    );
}


        </script>
 
        <style>
        .wip { font-family: serif; font-size: 12pt; color: #C00; letter-spacing: 1px; font-style: italic; }
        </style>
 
        <h3>Source</h3>
        <div id="view" class="codeview"></div>

        <h3>Generated Javascript</h3>
        <div id="javascript" class="codeview"><span class="wip">Still in development...</span></div>

        <h3>Generated C++</h3>
        <div id="cpp" class="codeview"><span class="wip">Still in development...</span></div>

        <h3>Generated GLSL</h3>
        <div id="glsl" class="codeview"><span class="wip">Still in development...</span></div>

        <h3>Generated AST (Abstract Syntax Tree)</h3>
        <div id="ast" class="codeview"></div>
  

        <script type="text/javascript">
        <!--
          $(document).ready(function () {

            $("#view").css("white-space", "pre");
            $("#view").text($("#source").text());

            var text = $("#source").text();
            var parser2 = new lxlang2.Parser();
            var ast = parser2.parse(text);

            var genCpp = new lxlang2.GenerateCpp();
            var genJs = new lxlang2.GenerateJavascript();

            $("#ast").text(JSON.stringify(ast, null, "    "));
            $("#cpp").text(genCpp.translate(ast));
            $("#javascript").text(genJs.translate(ast));


          });
        -->
        </script>

        <!-- Google Analytics -->         <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-604613-10']);
            _gaq.push(['_trackPageview']);
            (function () {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();        </script> 

    </body>
</html>
